<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI èƒ½åŠ›ç®¡ç† - Cyber NiuMa</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&display=swap" rel="stylesheet" />
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#D97706',
            'background-light': '#FDFBF7',
            'background-dark': '#1F1F1F',
            'surface-light': '#FFFFFF',
            'surface-dark': '#2D2D2D',
            'border-light': '#E5E7EB',
            'border-dark': '#404040',
            'text-light': '#1F2937',
            'text-dark': '#F3F4F6',
            'subtext-light': '#6B7280',
            'subtext-dark': '#9CA3AF'
          },
          fontFamily: {
            sans: ['"Noto Sans SC"', 'ui-sans-serif', 'system-ui']
          },
          backgroundImage: {
            'grid-pattern': "linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px)"
          }
        }
      }
    };
  </script>
  <style>
    .grid-bg {
      background-size: 40px 40px;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .ability-card.is-active {
      border-color: #D97706;
      background: #FFF7ED;
      box-shadow: 0 8px 18px rgba(217, 119, 6, 0.12);
    }

    .switch {
      appearance: none;
      width: 2.8rem;
      height: 1.55rem;
      border-radius: 9999px;
      background: #D1D5DB;
      position: relative;
      transition: all .2s ease;
      cursor: pointer;
    }

    .switch::after {
      content: '';
      position: absolute;
      width: 1.2rem;
      height: 1.2rem;
      border-radius: 9999px;
      top: 0.175rem;
      left: 0.175rem;
      background: white;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      transition: transform .2s ease;
    }

    .switch:checked {
      background: #16A34A;
    }

    .switch:checked::after {
      transform: translateX(1.25rem);
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 24px;
      transform: translate(-50%, 120%);
      padding: 10px 20px;
      border-radius: 10px;
      background: #111827;
      color: #fff;
      font-size: 13px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: all .25s ease;
      z-index: 999;
    }

    .toast.show {
      transform: translate(-50%, 0);
      opacity: 1;
    }
  </style>
</head>

<body class="bg-background-light text-text-light font-sans h-screen overflow-hidden">
  <div class="fixed inset-0 pointer-events-none z-0 bg-grid-pattern grid-bg opacity-60"></div>

  <div class="relative z-10 h-screen flex flex-col">
    <nav class="px-4 md:px-6 py-3 border-b border-border-light bg-background-light/90 backdrop-blur-md shrink-0">
      <div class="max-w-[1600px] mx-auto flex items-center justify-between gap-3">
        <a href="/" class="flex items-center gap-3 min-w-0">
          <img src="/logo.png?v=1770455352" alt="logo" class="w-9 h-9 rounded-lg shadow-sm" />
          <span class="text-xl font-black tracking-tight text-gray-900 truncate">Cyber NiuMa</span>
        </a>

        <div class="hidden md:flex items-center gap-6 text-sm">
          <a class="font-bold text-primary border-b-2 border-primary pb-1" href="/capability.html">AI èƒ½åŠ›ç®¡ç†</a>
          <a class="font-medium text-subtext-light hover:text-primary transition-colors" href="/">ä»»åŠ¡å¹¿åœº</a>
        </div>

        <div class="flex items-center gap-2">
          <span id="user-chip" class="hidden text-xs px-2.5 py-1 rounded-full bg-gray-100 text-gray-700 font-medium"></span>
          <button id="login-btn"
            class="px-4 py-2 text-xs md:text-sm font-bold bg-primary text-white rounded-lg hover:bg-amber-700 transition-colors">
            ç™»å½• SecondMe
          </button>
          <button id="logout-btn"
            class="hidden px-3 py-2 text-xs md:text-sm font-bold bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
            é€€å‡º
          </button>
        </div>
      </div>
    </nav>

    <main class="flex-1 overflow-hidden">
      <div class="max-w-[1600px] mx-auto h-full p-3 md:p-5">
        <div class="h-full grid grid-cols-1 lg:grid-cols-[360px_minmax(0,1fr)] gap-4">
          <aside class="bg-white/70 backdrop-blur-sm border border-gray-100 rounded-3xl flex flex-col min-h-0">
            <div class="p-4 border-b border-border-light space-y-3">
              <div class="flex items-center justify-between">
                <h2 class="text-sm font-black tracking-wide uppercase">æˆ‘çš„ AI èƒ½åŠ›</h2>
                <span id="ability-count" class="text-[11px] font-bold px-2 py-0.5 rounded bg-gray-100 text-gray-600">0</span>
              </div>
              <button id="add-ability-btn"
                class="w-full inline-flex items-center justify-center gap-2 py-2.5 rounded-xl bg-black text-white text-sm font-bold hover:opacity-90 transition-opacity">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                  <path fill-rule="evenodd"
                    d="M12 2.25a.75.75 0 0 1 .75.75v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 .75-.75Z"
                    clip-rule="evenodd" />
                </svg>
                æ·»åŠ èƒ½åŠ›
              </button>
              <div class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                  class="w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none">
                  <path fill-rule="evenodd"
                    d="M10.5 3a7.5 7.5 0 0 1 5.96 12.05l4.245 4.245a.75.75 0 1 1-1.06 1.06l-4.245-4.245A7.5 7.5 0 1 1 10.5 3Zm-6 7.5a6 6 0 1 0 12 0 6 6 0 0 0-12 0Z"
                    clip-rule="evenodd" />
                </svg>
                <input id="search-input" type="text" placeholder="æœç´¢èƒ½åŠ›..."
                  class="w-full rounded-xl border border-gray-200 bg-gray-50 text-sm py-2.5 pl-9 pr-3 focus:border-primary focus:ring-primary" />
              </div>
            </div>

            <div id="ability-list" class="flex-1 min-h-0 overflow-y-auto no-scrollbar p-3 space-y-2"></div>
          </aside>

          <section class="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden flex flex-col min-h-0">
            <div id="auth-banner" class="hidden mx-5 mt-5 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800">
              å½“å‰æœªç™»å½•ï¼Œèƒ½åŠ›é…ç½®æ— æ³•ä¿å­˜ã€‚è¯·å…ˆç™»å½• SecondMeã€‚
            </div>

            <form id="ability-form" class="flex-1 min-h-0 overflow-y-auto no-scrollbar" autocomplete="off">
              <div class="h-28 md:h-32 bg-gradient-to-r from-orange-400 via-orange-400 to-pink-500 px-6 md:px-8 pt-5 flex items-start justify-between">
                <div>
                  <p class="text-white/90 text-xs font-bold uppercase tracking-wider">èƒ½åŠ›è¯¦æƒ…é…ç½®</p>
                  <h1 id="form-title" class="text-white text-lg md:text-2xl font-black mt-1">æ–°å»ºèƒ½åŠ›</h1>
                </div>
                <label class="inline-flex items-center gap-2 rounded-full bg-white/20 border border-white/30 px-3 py-1.5">
                  <span class="text-white text-[11px] font-bold">å¯ç”¨çŠ¶æ€</span>
                  <input id="field-enabled" type="checkbox" class="switch" checked />
                </label>
              </div>

              <div class="px-5 md:px-8 pb-8 -mt-6 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-[92px_minmax(0,1fr)] gap-4 items-center bg-white rounded-2xl border border-gray-100 p-4 shadow-sm">
                  <div class="w-[92px] h-[92px] rounded-2xl bg-gradient-to-br from-orange-100 to-pink-100 flex items-center justify-center text-4xl"
                    id="avatar-emoji">ğŸ¤–</div>
                  <div class="space-y-2 min-w-0">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                      <div>
                        <label class="block text-xs font-bold text-gray-700 uppercase tracking-wider mb-1">AI åç§°</label>
                        <input id="field-name" type="text"
                          class="w-full rounded-xl border-gray-200 bg-gray-50 py-2.5 px-3 text-sm font-bold focus:ring-primary focus:border-primary"
                          placeholder="ä¾‹å¦‚ï¼šè§†è§‰ç¾åŒ–å¤§å¸ˆ" required />
                      </div>
                      <div>
                        <label class="block text-xs font-bold text-gray-700 uppercase tracking-wider mb-1">å›¾æ ‡ Emoji</label>
                        <input id="field-icon" type="text"
                          class="w-full rounded-xl border-gray-200 bg-gray-50 py-2.5 px-3 text-sm focus:ring-primary focus:border-primary"
                          placeholder="ğŸ¨" maxlength="2" />
                      </div>
                    </div>
                    <div>
                      <label class="block text-xs font-bold text-gray-700 uppercase tracking-wider mb-1">çŸ­ä»‹ç»</label>
                      <input id="field-description" type="text"
                        class="w-full rounded-xl border-gray-200 bg-gray-50 py-2.5 px-3 text-sm focus:ring-primary focus:border-primary"
                        placeholder="ä¸€å¥è¯è¯´æ˜è¿™ä¸ªèƒ½åŠ›æ“…é•¿åšä»€ä¹ˆ" />
                    </div>
                  </div>
                </div>

                <div>
                  <label class="flex items-center gap-2 text-xs font-bold text-gray-800 uppercase tracking-wider mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                      class="w-4 h-4 text-primary">
                      <path stroke-linecap="round" stroke-linejoin="round"
                        d="M6.75 7.5h10.5m-10.5 4.5h10.5m-10.5 4.5h10.5M3 4.5h18v15H3v-15Z" />
                    </svg>
                    ç³»ç»Ÿæç¤ºè¯ (System Prompt)
                  </label>
                  <textarea id="field-prompt" rows="6"
                    class="w-full rounded-2xl border border-gray-200 bg-gray-50 font-mono text-sm p-4 focus:ring-primary focus:border-primary"
                    placeholder="ä¾‹å¦‚ï¼šä½ æ˜¯ä¸€ä½ä¸“ä¸šä¿®å›¾å¸ˆ...\nè¾“å‡ºåŒ…å«ï¼šä»»åŠ¡è§£è¯»ã€æœ€ç»ˆæç¤ºè¯ã€å‚æ•°å»ºè®®ã€éªŒæ”¶æ ‡å‡†"></textarea>
                </div>

                <div class="rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-4 md:p-5 space-y-4">
                  <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5 text-primary">
                      <path fill-rule="evenodd"
                        d="M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6Zm4.5.75a.75.75 0 0 0 0 1.5h5.25a.75.75 0 0 0 0-1.5H6.75Zm0 4.5a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5H6.75Zm0 4.5a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z"
                        clip-rule="evenodd" />
                    </svg>
                    <h3 class="text-xs font-black tracking-wider uppercase">è‡ªå®šä¹‰ API é…ç½®</h3>
                  </div>

                  <div class="rounded-xl border border-gray-200 bg-white p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
                    <div>
                      <p class="text-sm font-bold text-gray-900">ä½¿ç”¨è‡ªå®šä¹‰ API</p>
                      <p id="api-mode-hint" class="text-xs text-gray-600 mt-0.5">
                        å…³é—­æ—¶ä½¿ç”¨ SecondMe AI æ¥å£ï¼›å¼€å¯åå°†ä½¿ç”¨ä¸‹æ–¹è‡ªå®šä¹‰ API ä¸æ¨¡å‹ã€‚
                      </p>
                    </div>
                    <input id="field-use-custom-api" type="checkbox" class="switch" />
                  </div>

                  <div id="custom-api-panel" class="space-y-3">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                      <div>
                        <label class="block text-[11px] font-bold text-gray-600 uppercase mb-1">API Endpoint</label>
                        <input id="field-api-endpoint" type="url" placeholder="https://api.example.com/v1"
                          class="w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm focus:ring-primary focus:border-primary" />
                      </div>
                      <div>
                        <label class="block text-[11px] font-bold text-gray-600 uppercase mb-1">API Key</label>
                        <input id="field-api-key" type="password" placeholder="sk-..."
                          class="w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm focus:ring-primary focus:border-primary" />
                      </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_auto] gap-3 items-end">
                      <div>
                        <label class="block text-[11px] font-bold text-gray-600 uppercase mb-1">æ¨¡å‹</label>
                        <select id="field-api-model"
                          class="w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm focus:ring-primary focus:border-primary"></select>
                      </div>
                      <button id="fetch-models-btn" type="button"
                        class="h-10 px-4 rounded-lg border border-gray-300 bg-white text-sm font-bold text-gray-700 hover:border-primary hover:text-primary transition-colors">
                        Fetch æ¨¡å‹
                      </button>
                    </div>

                    <p id="fetch-status" class="text-xs text-gray-500">ç‚¹å‡» â€œFetch æ¨¡å‹â€ è·å–å½“å‰ API å¯ç”¨æ¨¡å‹ã€‚</p>
                  </div>
                </div>

                <div class="flex flex-wrap items-center justify-between gap-3 pt-2">
                  <button id="delete-btn" type="button"
                    class="px-4 py-2 rounded-xl text-sm font-bold text-red-600 hover:bg-red-50 transition-colors hidden">
                    åˆ é™¤èƒ½åŠ›
                  </button>
                  <div class="ml-auto flex items-center gap-2">
                    <button id="reset-btn" type="button"
                      class="px-5 py-2 rounded-xl text-sm font-bold text-gray-600 hover:bg-gray-100 transition-colors">
                      é‡ç½®
                    </button>
                    <button id="save-btn" type="submit"
                      class="px-7 py-2 rounded-xl text-sm font-bold text-white bg-black hover:bg-gray-800 transition-colors">
                      ä¿å­˜æ›´æ”¹
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </section>
        </div>
      </div>
    </main>
  </div>

  <div id="toast" class="toast"></div>
  <script src="/capability.js"></script>
</body>

</html>
